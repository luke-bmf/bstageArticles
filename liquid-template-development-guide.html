<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Liquid 템플릿 개발 가이드</title>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    html { overflow-x: hidden; }
    body {
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
      max-width: 880px;
      margin: 0 auto;
      padding: 2rem 80px;
      position: relative;
      line-height: 1.5;
    }
    h1, h2, h3, h4, h5, h6 { line-height: 1.2; }
    img { max-width: 100%; height: auto; }
    table {
      width: 100%;
      max-width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px 14px;
      text-align: left;
      word-break: break-word;
      overflow-wrap: break-word;
      vertical-align: top;
    }
    th { background: #f5f5f5; font-weight: 600; }
    tr:nth-child(even) { background: #fafafa; }
    blockquote {
      color: #6b7280;
      border-left: 3px solid #9ca3af;
      padding-left: 16px;
      margin: 1rem 0;
    }
    blockquote p { margin: 0; }
    pre, code { max-width: 100%; overflow-x: auto; background: #f5f5f5; padding: 2px 6px; border-radius: 4px; font-size: 0.9em; }
    pre { padding: 16px; margin: 1rem 0; }
    .article-hero {
      position: relative;
      width: 100%;
      min-width: 0;
      max-width: 700px;
      aspect-ratio: 7 / 4;
      overflow: hidden;
      border-radius: 12px;
      margin-bottom: 48px;
    }
    .article-hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    @media screen and (max-width: 500px) {
      body { padding: 1rem 16px; }
    }
  </style>
</head>
<body>
  <h1>Liquid 템플릿 개발 가이드</h1>
  <blockquote>
    <p>이 문서는 Next.js 프로젝트에서 Liquid 템플릿을 개발하고 추가하는 방법을 안내합니다.</p>
  </blockquote>

  <h2>목차</h2>
  <ul>
    <li>개요</li>
    <li>프로젝트 구조</li>
    <li>템플릿 추가 절차</li>
    <li>Liquid 문법 가이드</li>
    <li>데이터 바인딩</li>
    <li>테스트 및 확인</li>
    <li>주의사항</li>
  </ul>

  <h2>개요</h2>
  <p>이 프로젝트는 Next.js 기반의 Liquid 템플릿 에뮬레이션 환경을 제공합니다. 개발 파트너에서 개발한 <code>.liquid</code> 파일들을 이 환경에서 테스트하고 확인할 수 있습니다.</p>

  <h3>개발 환경과 프로덕션 환경</h3>
  <table>
    <thead>
      <tr><th>환경</th><th>설명</th></tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>개발 환경</strong></td>
        <td>data.json 파일을 사용하여 정적 데이터 제공. 템플릿 개발 및 테스트 목적. 로컬에서 빠르게 프로토타이핑 가능</td>
      </tr>
      <tr>
        <td><strong>프로덕션 환경</strong></td>
        <td>Next.js 서버의 getServerSideProps에서 API 호출 또는 데이터베이스 조회. 동적으로 데이터를 페칭하여 Liquid 템플릿에 전달. 실제 사용자 데이터를 실시간으로 렌더링</td>
      </tr>
    </tbody>
  </table>

  <h3>주요 특징</h3>
  <ul>
    <li><strong>멀티 스테이지 지원</strong>: 여러 스테이지(테넌트)별로 독립적인 템플릿 관리</li>
    <li><strong>템플릿 파일</strong>: <code>public/{stage}/</code> 디렉토리에 저장</li>
    <li><strong>데이터 파일</strong>: 개발 환경에서는 선택적으로 data.json 파일로 데이터 제공</li>
    <li><strong>접근 경로</strong>: <code>/{stage}/{템플릿명}</code> 형태로 접근</li>
    <li><strong>템플릿 목록</strong>: <code>/{stage}</code> 경로에서 해당 스테이지의 템플릿 목록 확인 가능</li>
  </ul>

  <h2>프로젝트 구조</h2>
  <pre><code>public/
├── stage1/           # 스테이지 1 디렉토리
│   ├── template-name/   # 템플릿 폴더 (템플릿명으로 생성)
│   │   ├── template.liquid   # 필수: Liquid 템플릿 파일
│   │   └── data.json         # 선택: 템플릿에 전달할 데이터
│   └── ...
├── stage2/
│   └── ...
└── ...</code></pre>

  <h3>스테이지(Stage) 개념</h3>
  <p>스테이지: 서드파티 개발사가 여러 스테이지(테넌트)에 해당하는 템플릿을 개발할 수 있도록 지원. 각 스테이지는 독립적인 템플릿 세트를 가집니다. 스테이지명은 URL 경로의 일부가 됩니다 (예: <code>/stage1/shop</code>).</p>

  <h3>필수 파일</h3>
  <ul>
    <li><code>template.liquid</code>: Liquid 템플릿 파일 (필수)</li>
    <li><code>data.json</code>: 템플릿에 전달할 데이터 (선택)</li>
  </ul>

  <h2>템플릿 추가 절차</h2>

  <h3>1단계: 스테이지 디렉토리 확인 또는 생성</h3>
  <p>먼저 작업할 스테이지 디렉토리가 있는지 확인합니다. 없으면 생성합니다.</p>
  <p><code>public/stage1/</code></p>

  <h3>2단계: 템플릿 폴더 생성</h3>
  <p>스테이지 디렉토리 아래에 새로운 템플릿 폴더를 생성합니다.</p>
  <p><code>public/stage1/my-template/</code></p>
  <p><strong>폴더명 규칙</strong>: 영문 소문자, 숫자, 하이픈(-)만 사용. 공백이나 특수문자 사용 금지. 예: <code>my-template</code>, <code>product-page</code>, <code>landing-v1</code></p>

  <h3>3단계: template.liquid 파일 생성</h3>
  <pre><code>&lt;!doctype html&gt;
&lt;html lang='ko'&gt;
&lt;head&gt;
&lt;meta charset='UTF-8'&gt;
&lt;title&gt;{{ title | default: '기본 제목' }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class='container'&gt;
  &lt;h1&gt;{{ heading }}&lt;/h1&gt;
  &lt;p&gt;{{ description }}&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

  <h3>4단계: data.json 파일 생성 (선택)</h3>
  <pre><code>{
  "title": "페이지 제목",
  "heading": "메인 헤딩",
  "description": "페이지 설명"
}</code></pre>

  <h3>5단계: 템플릿 확인</h3>
  <p>개발 서버를 실행한 후 다음 경로로 접근하여 템플릿을 확인합니다:</p>
  <ul>
    <li><code>http://localhost:3000/stage1/my-template</code> — 개별 템플릿</li>
    <li><code>http://localhost:3000/stage1</code> — 스테이지별 템플릿 목록</li>
  </ul>

  <h2>Liquid 문법 가이드</h2>

  <h3>변수 출력</h3>
  <pre><code>{{ variable_name }}
{{ user.name }}
{{ product.price }}</code></pre>

  <h3>기본값 설정</h3>
  <pre><code>{{ title | default: '기본 제목' }}
{{ description | default: '설명이 없습니다' }}</code></pre>

  <h3>조건문</h3>
  <pre><code>{% if condition %}
  조건이 참일 때 표시
{% endif %}

{% if user.role == 'admin' %}
  관리자 전용 내용
{% elsif user.role == 'user' %}
  일반 사용자 내용
{% else %}
  기타 내용
{% endif %}</code></pre>

  <h3>반복문</h3>
  <pre><code>{% for item in items %}
  &lt;div&gt;{{ item.name }}&lt;/div&gt;
{% endfor %}</code></pre>

  <h3>필터</h3>
  <table>
    <thead><tr><th>문법</th><th>설명</th></tr></thead>
    <tbody>
      <tr><td><code>{{ text | upcase }}</code></td><td>대문자 변환</td></tr>
      <tr><td><code>{{ text | downcase }}</code></td><td>소문자 변환</td></tr>
      <tr><td><code>{{ text | capitalize }}</code></td><td>첫 글자 대문자</td></tr>
      <tr><td><code>{{ text | slice: 0, 10 }}</code></td><td>문자열 자르기</td></tr>
      <tr><td><code>{{ array | size }}</code></td><td>배열 크기</td></tr>
      <tr><td><code>{{ json_string | parse_json }}</code></td><td>JSON 파싱</td></tr>
    </tbody>
  </table>

  <h3>주석</h3>
  <pre><code>{% comment %}
  이 부분은 주석입니다. 렌더링되지 않습니다.
{% endcomment %}</code></pre>

  <h2>데이터 바인딩</h2>
  <blockquote>
    <p><strong>중요</strong>: 이 프로젝트는 개발/테스트 환경을 위한 에뮬레이션 환경입니다. data.json 파일은 개발 및 테스트 목적으로만 사용되며, 프로덕션에서는 Next.js 서버에서 동적으로 데이터를 페칭합니다.</p>
  </blockquote>

  <h3>중첩 객체 및 배열 접근</h3>
  <pre><code>{{ user.profile.name }}
{{ product.category.name }}
{{ items[0] }}
{{ products[1].name }}</code></pre>

  <h2>테스트 및 확인</h2>
  <ol>
    <li>로컬 개발 서버 실행: <code>npm run dev</code> 또는 <code>yarn dev</code></li>
    <li>스테이지별 템플릿 목록: <code>http://localhost:3000/{stage}</code></li>
    <li>개별 템플릿: <code>http://localhost:3000/{stage}/{템플릿명}</code></li>
    <li>data.json 수정 후 페이지 새로고침하면 즉시 반영</li>
  </ol>

  <h2>주의사항</h2>
  <table>
    <thead><tr><th>항목</th><th>내용</th></tr></thead>
    <tbody>
      <tr><td><strong>파일 구조</strong></td><td>필수 파일명: template.liquid. 폴더 구조: 각 템플릿은 독립적인 폴더에 있어야 함. 폴더명이 URL 경로가 되므로 신중하게 결정</td></tr>
      <tr><td><strong>Liquid 문법</strong></td><td>{{ }} (출력), {% %} (제어문). 공백 제거: {{- variable -}}. HTML 자동 이스케이프됨</td></tr>
      <tr><td><strong>데이터 파일</strong></td><td>data.json은 유효한 JSON 형식이어야 함. UTF-8 인코딩. 개발용으로만 사용</td></tr>
      <tr><td><strong>스타일링</strong></td><td>&lt;style&gt; 태그 사용 가능. 외부 CSS는 public 디렉토리에 배치. 반응형 디자인 권장</td></tr>
      <tr><td><strong>성능</strong></td><td>템플릿 파일 크기 주의. 깊은 중첩 구조는 성능에 영향. 이미지는 public 디렉토리에 배치</td></tr>
    </tbody>
  </table>

  <h2>문제 해결</h2>
  <h3>템플릿이 표시되지 않을 때</h3>
  <ul>
    <li>파일 경로: <code>public/{stage}/{템플릿명}/template.liquid</code> 확인</li>
    <li>스테이지명과 URL 경로 일치 여부 확인</li>
    <li>파일명: template.liquid (정확한 이름)</li>
    <li>개발 서버 재시작</li>
  </ul>

  <h3>데이터가 표시되지 않을 때</h3>
  <ul>
    <li>data.json 유효한 JSON 형식인지 확인</li>
    <li>변수명과 JSON 키 일치 여부 확인</li>
    <li><code>{{ variable | default: '기본값' }}</code> 사용</li>
  </ul>

  <h2>추가 리소스</h2>
  <ul>
    <li><a href="https://shopify.github.io/liquid/" target="_blank" rel="noopener">Liquid 공식 문서</a></li>
    <li>프로젝트 내 예시 템플릿: <code>public/{stage}/</code> 디렉토리 참고</li>
  </ul>

  <blockquote>
    <p><strong>문의</strong>: 템플릿 개발 중 문제가 발생하거나 질문이 있으시면 프로젝트 관리자에게 문의해주세요.</p>
  </blockquote>
</body>
</html>
